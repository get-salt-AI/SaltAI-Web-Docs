# Oracle Complex Query

<div style="display: flex; gap: 20px; align-items: flex-start; margin-bottom: 20px;">
<div style="flex: 1; min-width: 0;">

Executes complex Oracle SQL statements, including multi-table JOINs and advanced clauses. It sends the provided SQL and a declared query type to the Oracle service using stored credentials, then returns a formatted textual summary alongside structured result data.

</div>
<div style="flex: 0 0 300px;"><img src="../../../../images/previews/connectors/oracle/saltoraclecomplexquery.png" alt="Preview" style="width: 100%; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);" /></div>
</div>

## Usage

Use this node when you need to run sophisticated Oracle SQL beyond simple selects, such as multi-table joins, window functions, or aggregations. Place it in workflows that read from Oracle databases and consume the results as text for viewing and as structured data for downstream processing or export.

## Inputs

<div style="overflow-x: auto;">
<table style="table-layout: fixed; width: 100%;">
<colgroup>
<col style="width: 15%;">
<col style="width: 10%;">
<col style="width: 15%;">
<col style="width: 30%;">
<col style="width: 30%;">
</colgroup>
<thead><tr><th>Field</th><th>Required</th><th>Type</th><th>Description</th><th>Example</th></tr></thead>
<tbody>
<tr><td style="word-wrap: break-word;">credentials_path</td><td>True</td><td style="word-wrap: break-word;">STRING</td><td style="word-wrap: break-word;">Path or reference to stored Oracle credentials that follow the Oracle credential template.</td><td style="word-wrap: break-word;">/secrets/connections/oracle.json</td></tr>
<tr><td style="word-wrap: break-word;">timeout</td><td>False</td><td style="word-wrap: break-word;">INT</td><td style="word-wrap: break-word;">Maximum time in seconds to wait for the Oracle operation to complete before failing.</td><td style="word-wrap: break-word;">120</td></tr>
<tr><td style="word-wrap: break-word;">sql_text</td><td>True</td><td style="word-wrap: break-word;">STRING</td><td style="word-wrap: break-word;">The SQL query to execute. Supports complex SELECTs with JOINs and advanced SQL features.</td><td style="word-wrap: break-word;">SELECT e.employee_id, e.first_name, e.last_name, d.department_name FROM employees e JOIN departments d ON e.department_id = d.department_id WHERE e.salary > 75000</td></tr>
<tr><td style="word-wrap: break-word;">query_type</td><td>True</td><td style="word-wrap: break-word;">STRING</td><td style="word-wrap: break-word;">Declares the type of the query being executed (e.g., SELECT). Used to route the request appropriately.</td><td style="word-wrap: break-word;">SELECT</td></tr>
</tbody>
</table>
</div>

## Outputs

<div style="overflow-x: auto;">
<table style="table-layout: fixed; width: 100%;">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 35%;">
<col style="width: 25%;">
</colgroup>
<thead><tr><th>Field</th><th>Type</th><th>Description</th><th>Example</th></tr></thead>
<tbody>
<tr><td style="word-wrap: break-word;">text</td><td style="word-wrap: break-word;">STRING</td><td style="word-wrap: break-word;">Human-readable summary or table-like rendering of the query results.</td><td style="word-wrap: break-word;">Oracle Complex Query (SELECT): 25 rows returned</td></tr>
<tr><td style="word-wrap: break-word;">json</td><td style="word-wrap: break-word;">JSON</td><td style="word-wrap: break-word;">Structured data for the query result, suitable for programmatic consumption.</td><td style="word-wrap: break-word;">{"rows": [{"EMPLOYEE_ID": 101, "FIRST_NAME": "Neena", "LAST_NAME": "Kochhar", "DEPARTMENT_NAME": "Executive"}], "row_count": 25}</td></tr>
</tbody>
</table>
</div>

## Important Notes
- Ensure that the credentials referenced by credentials_path are valid and configured for the Oracle service template.
- query_type should align with the SQL you provide (e.g., SELECT). Mismatched types may lead to errors.
- Parameter placeholders (e.g., :min_salary) are not bound by separate inputs in this node. Provide fully resolved SQL or ensure your backend supports inline parameters as used.
- Large result sets may increase execution time. Use WHERE, GROUP BY, and FETCH FIRST (row limiting) where appropriate.
- The node returns a readable text summary and structured JSON. Export formats beyond these are not generated by this node.

## Troubleshooting
- SQL error returned: Verify sql_text syntax and that all referenced tables/columns exist and are accessible to the provided user.
- Timeout exceeded: Increase the timeout input or optimize the query with filters and indexes.
- Permission denied: Confirm the Oracle user in credentials has sufficient privileges to read the referenced objects.
- Empty results: Check WHERE conditions and join predicates; test the query directly in your database client to validate expectations.
- Invalid query_type: Use a supported type string (e.g., SELECT) that matches the SQL operation you are running.
