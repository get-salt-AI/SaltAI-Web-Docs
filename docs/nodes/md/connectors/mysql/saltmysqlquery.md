# MySQL Query

Executes a read-only SQL SELECT query against a MySQL database using configured credentials. Returns a human-readable summary and a JSON payload by default, with compatibility for additional formatted outputs via shared database helpers.

## Usage

Use this node when you need to fetch data from a MySQL database within a Salt workflow. Provide valid MySQL credentials and a SELECT statement; the node will run the query and produce text and JSON outputs you can route to downstream processing, visualization, or export nodes. For DML (INSERT/UPDATE/DELETE), use the dedicated execute node instead.

## Inputs

<div style="overflow-x: auto;">
<table style="table-layout: fixed; width: 100%;">
<colgroup>
<col style="width: 15%;">
<col style="width: 10%;">
<col style="width: 15%;">
<col style="width: 30%;">
<col style="width: 30%;">
</colgroup>
<thead><tr><th>Field</th><th>Required</th><th>Type</th><th>Description</th><th>Example</th></tr></thead>
<tbody>
<tr><td style="word-wrap: break-word;">credentials_path</td><td>True</td><td style="word-wrap: break-word;">CREDENTIALS</td><td style="word-wrap: break-word;">Path or reference to stored MySQL credentials. The credential should include host, port, database, username, and password configured for the MySQL service.</td><td style="word-wrap: break-word;"><path-to-mysql-credentials></td></tr>
<tr><td style="word-wrap: break-word;">timeout</td><td>False</td><td style="word-wrap: break-word;">INT</td><td style="word-wrap: break-word;">Request timeout in seconds for the database operation.</td><td style="word-wrap: break-word;">60</td></tr>
<tr><td style="word-wrap: break-word;">sql_text</td><td>True</td><td style="word-wrap: break-word;">STRING</td><td style="word-wrap: break-word;">A SQL SELECT query to execute. Must be a read-only statement.</td><td style="word-wrap: break-word;">SELECT id, email FROM users ORDER BY created_at DESC LIMIT 100</td></tr>
</tbody>
</table>
</div>

## Outputs

<div style="overflow-x: auto;">
<table style="table-layout: fixed; width: 100%;">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 35%;">
<col style="width: 25%;">
</colgroup>
<thead><tr><th>Field</th><th>Type</th><th>Description</th><th>Example</th></tr></thead>
<tbody>
<tr><td style="word-wrap: break-word;">text</td><td style="word-wrap: break-word;">STRING</td><td style="word-wrap: break-word;">Human-readable summary of the query results (e.g., row count and formatted rows).</td><td style="word-wrap: break-word;">MySQL Query Results (10 rows): ...</td></tr>
<tr><td style="word-wrap: break-word;">json</td><td style="word-wrap: break-word;">STRING</td><td style="word-wrap: break-word;">JSON string containing the raw result data for programmatic use.</td><td style="word-wrap: break-word;">{"data": [{"id": 1, "email": "user@example.com"}], "row_count": 1}</td></tr>
<tr><td style="word-wrap: break-word;">html</td><td style="word-wrap: break-word;">Not specified</td><td style="word-wrap: break-word;">HTML-rendered table of results (may be empty when using default output mode).</td><td style="word-wrap: break-word;"><table><thead>...</thead><tbody>...</tbody></table></td></tr>
<tr><td style="word-wrap: break-word;">xlsx</td><td style="word-wrap: break-word;">Not specified</td><td style="word-wrap: break-word;">Spreadsheet data for results in XLSX format (may be empty when using default output mode).</td><td style="word-wrap: break-word;"><xlsx-binary-or-buffer></td></tr>
<tr><td style="word-wrap: break-word;">pdf</td><td style="word-wrap: break-word;">Not specified</td><td style="word-wrap: break-word;">PDF data for results (may be empty when using default output mode).</td><td style="word-wrap: break-word;"><pdf-binary-or-buffer></td></tr>
</tbody>
</table>
</div>

## Important Notes
- **Read-only**: This node is intended for SELECT queries. Use SaltMySQLExecute for INSERT/UPDATE/DELETE.
- **Credentials required**: Ensure the provided credentials have sufficient privileges to execute the query and access the target database/tables.
- **Timeouts**: Large or complex queries may require increasing the timeout to prevent premature termination.
- **Result formats**: By default, text and JSON are returned; additional formats (HTML/XLSX/PDF) are supported by shared helpers and may be empty unless explicitly generated by compatible nodes.
- **SQL safety**: Avoid concatenating untrusted input into the SQL string to prevent SQL injection. Parameterization is not handled automatically by this node.

## Troubleshooting
- **Authentication failed**: Verify host, port, database name, username, and password in the credentials reference.
- **Network/connectivity errors**: Confirm the MySQL server is reachable from the environment where the workflow runs and that firewalls/security groups allow access.
- **Permission denied**: Ensure the database user has SELECT privileges on the referenced tables and schemas.
- **SQL syntax error**: Validate the SQL in sql_text. Test it directly against the database to confirm correctness.
- **Empty results**: Confirm the WHERE clause and target tables contain data matching your criteria.
- **Timeouts or very slow queries**: Increase the timeout input, add indexes, simplify the query, or limit the result set (e.g., add LIMIT).
