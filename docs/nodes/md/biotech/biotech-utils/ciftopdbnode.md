# CIF To PDB

<div style="display: flex; gap: 20px; align-items: flex-start; margin-bottom: 20px;">
<div style="flex: 1; min-width: 0;">

Converts molecular structures from CIF (mmCIF) format to PDB format using BioPython. Accepts one or more CIF structures provided as a dictionary and returns a dictionary of PDB strings keyed by the same names. Skips empty entries and raises clear errors for invalid or unparseable inputs.

</div>
<div style="flex: 0 0 300px;"><img src="../../../../images/previews/biotech/biotech-utils/ciftopdbnode.png" alt="Preview" style="width: 100%; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);" /></div>
</div>

## Usage

Use this node when you need PDB outputs but your upstream data is in CIF/mmCIF format (e.g., downloaded from structural databases or generated by other tools). Commonly placed after a loader node that provides CIF text and before nodes that require PDB input (visualization, sequence extraction, chain operations, etc.).

## Inputs

<div style="overflow-x: auto;">
<table style="table-layout: fixed; width: 100%;">
<colgroup>
<col style="width: 15%;">
<col style="width: 10%;">
<col style="width: 15%;">
<col style="width: 30%;">
<col style="width: 30%;">
</colgroup>
<thead><tr><th>Field</th><th>Required</th><th>Type</th><th>Description</th><th>Example</th></tr></thead>
<tbody>
<tr><td style="word-wrap: break-word;">cif</td><td>True</td><td style="word-wrap: break-word;">CIF</td><td style="word-wrap: break-word;">Dictionary of CIF structures to convert, in the form {cif_name: cif_content}. Each cif_content must be a valid mmCIF text string.</td><td style="word-wrap: break-word;">{'example_structure': 'data_example\n_loop\n_atom_site.group_PDB ...\n#\n'}</td></tr>
</tbody>
</table>
</div>

## Outputs

<div style="overflow-x: auto;">
<table style="table-layout: fixed; width: 100%;">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 35%;">
<col style="width: 25%;">
</colgroup>
<thead><tr><th>Field</th><th>Type</th><th>Description</th><th>Example</th></tr></thead>
<tbody>
<tr><td style="word-wrap: break-word;">structure.pdb</td><td style="word-wrap: break-word;">PDB</td><td style="word-wrap: break-word;">Dictionary of converted PDB structures, keyed by the original CIF names: {cif_name: pdb_content}.</td><td style="word-wrap: break-word;">{'example_structure': 'HEADER EXAMPLE\nATOM      1  N   MET A   1 ...\nEND\n'}</td></tr>
</tbody>
</table>
</div>

## Important Notes
- **Input shape**: The input must be a non-empty dictionary mapping names to CIF text. Empty strings are skipped; if all entries are empty or invalid, the node raises an error.
- **Parsing library**: Uses BioPython's MMCIFParser for reading and PDBIO for writing; minor differences or information loss may occur due to format conversion limits.
- **Metadata propagation**: Output includes Salt metadata for downstream saving/export nodes.
- **Large structures**: Very large CIFs may increase memory and processing time.
- **Error handling**: The node raises ValueError with a helpful message if conversion fails for any item.

## Troubleshooting
- **Error: 'CIF input must be a non-empty dictionary'**: Ensure you pass a dictionary like {"name": "<cif_text>"} and that it is not empty.
- **Conversion failed for CIF '<name>'**: The CIF text may be malformed or contain unsupported constructs. Validate the CIF content or try simplifying it.
- **Empty output or missing keys**: Check for empty strings in the input; the node skips entries with empty content.
- **Unexpected differences in PDB**: Due to mmCIFâ†’PDB limitations, some annotations may not carry over. If critical, keep data in CIF or use nodes that accept CIF.
- **Performance issues with big files**: Reduce input size, split the workload, or ensure sufficient resources.
